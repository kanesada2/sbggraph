<template>
  <div>
      <el-tabs v-model="activeName" @tab-click="selectType" tabPosition="bottom" stretch>
        <el-tab-pane label="COURSE" name="absoluteHits">打ったボールの絶対座標</el-tab-pane>
        <el-tab-pane label="SWING" name="absoluteBats">ミートポイント(そこを狙って振った場所)の絶対座標</el-tab-pane>
        <el-tab-pane label="IMPACT" name="relativeHits">ミートポイントから見た打ったボールの相対的な座標</el-tab-pane>
    </el-tabs>
      <Plotly :data="data" :layout="layout" @click="showDialog"/>
      <el-card class="box-card">
        <div slot="header" class="clearfix">
            <span>フィルター</span>
        </div>
        <el-form ref="form" :model="filter" label-width="20%">
        <el-form-item label="打者">
            <el-select v-model="filter.batterId" placeholder="プレイヤーID">
            </el-select>
        </el-form-item>
        <el-form-item label="投手">
            <el-select v-model="filter.pitcherId" placeholder="プレイヤーID">
            </el-select>
        </el-form-item>
        <el-form-item label="飛距離">
            <el-input-number v-model="filter.distance.threshold" class="filterInput"/>
            <el-select v-model="filter.distance.condtion">
                <el-option label="以上" value=">"/>
                <el-option label="以下" value="<"/>
            </el-select>
        </el-form-item>
        <el-form-item>
            <el-button type="primary" @click="extract">抽出</el-button>
        </el-form-item>
      </el-form>
      </el-card>
      <el-dialog
        title="打球情報"
        :visible.sync="pointSelected"
        width="30%"
      >
        <span>打球の情報表示</span>
        <span slot="footer" class="dialog-footer">
            <el-button @click="pointSelected = false">閉じる</el-button>
            <el-button type="primary" @click="$router.push(targetUrl)">詳細</el-button>
        </span>
      </el-dialog>
  </div>
</template>

<script>
import { Plotly } from 'vue-plotly'

export default {
    components: {
        Plotly
    },
    data: function () {
        return {
            data: [{ 
                    x: [0.029215617122602004, -0.16267877359001048, -0.6231689103029594, 0.22386193511693547, 0.3279255368970162, 0.11057442064272548, 0.665109542837713, -0.27019910351590626, -0.400446721983004, -0.2283330384960948, -0.025949400167022487, 0.2709672793000749, -0.14122115681192784, -0.21076297291836796, -0.006477869515860126, -0.12423311422924628, -0.5526420258972021, 1.36529849049678, 0.1583539128011957, -0.1293609790574037, -0.04517898947999928, -0.17039360752876964, 0.07688643570514937, 0.3110819637531333, 0.1282495702307274, 0.0050703284486987975, -0.15903193955731984, 0.305492141511586, -0.1643070924773678, -0.34563111493366494, -0.137991988480729, -0.6767579477050604, -0.7517613985953044, -0.36774958238465283, 0.6565179276157114, 0.2858826518098493, -0.31779640095521716, -0.4810289847982495, -0.141826977331282, 0.23281772996996708, -0.3656974801413206, -0.8225809871017632, -0.16690555297406862, -0.41330419877533503, -0.49426310827870945, -0.23680257909984515, -0.12060331405267097, -0.21931107592878812, -0.08914218326664174, -0.3377772585099694, 0.13742337686309308, 0.3581352300037964, -0.1965654379307959, 0.21936851380203395, -0.19019362813719384, 0.79062280920146, 0.3845880939539827, 0.14381484673707245, 0.3161746848355822, 0.08974275899584643, 0.13880577789128296, -0.6179814464355715, -0.17977352504700223, 1.1469482301962135, -0.02973814763772683, -0.15584332758827904, -0.3456456460474576, -0.5595698084660341, 0.3129212173906428, -0.028071787792596763, 0.11493406339527745, 0.18771603809882983, -0.48345846399412873, -0.17640866437389316, -0.27647956706431104, -0.19708455044152992, -0.21410254745539603, -0.6741161880213522, -0.5793063100156479, -0.347910972868605, 0.08047074109571822, 0.06775386013373454, -0.3904911503840142, -0.24016597843640722, 0.0880670117184232, 0.10895209902913967, -0.289141447742693, 0.08127445932753469, -0.34336566038061606, -0.2050221801686844, 0.05573828408006279, -0.2066788973513178, 0.16568833383280637, 0.8263250613999832, 0.36786969460430297, 0.133051198246452, -0.23501164521012172, -0.6049719909931559, 0.5143769029571073, -0.29675283685524395, 0.5949789519263097, 0.12639265976593925, 0.10396547581419562, 0.5978821159054701, -0.17344066648899822, 0.5391606647859943, -0.36997973515967963, 0.6783479489756891, 0.16811192007780382, -0.3130204189279322, 0.06019464895656167, 0.29649261406878896, -0.04129686503208293, -0.443592600727475, 0.06893707137711573, 0.022637139411789704, 0.11366446799169158, -0.31288850469285656, 0.29049134948453914, 0.6650799273997805, 0.40932927602774005, 0.14004412676752787, -0.2936646520872431, -0.1494998134531526, 0.3784116177477147, -2.189374108183118, -0.24203049551404301, 0.25427887388560394, 0.17491461904301345, -0.213979419428441, 0.05322496773132841, 0.29573216006960185, 0.1931962280569159, 0.005956312408562965, 0.252317073290284, 0.045182798393714654, -0.28872224360218085, -0.6955122126330643, -0.5416987389163378, 1.1504639199240658, -0.35348949085258397, 0.5309298269270301, 0.8443250717555467, -0.4000956234454895, -0.5956542078634303, 0.8909415639696094, -0.9136584296321385, -0.7670767950335835, 0.7840329394850504, 0.7159338312837299, -0.8159758455276931, 0.908714901162364, 1.3430677334119827, 1.276981727166897, 0.44551605395910066, 0.38223963481152123, 0.07847539543460627, -0.0057572453499825805, 0.7116816776804538, 0.08937197818561163, 0.04833506054954645, -0.38697061847863345, -0.2989815445428302, -0.6143302657294152, -0.10265886216610697, 0.009875628551179124, -0.3844450101922374, 0.054219545396037835, 0.2029355350336938, -0.2687137072258467, 0.41426024381056653, 0.6253579267791392, -0.49852179252586437, 0.32743339429803037, -0.5667710207474138, 0.08176700482163542, 0.6502296418656587, -0.005143355073709468, -0.6148877460878678, 0.34490697710964136, 0.0984898558669133, 0.26939348032511623, -0.15032276913781328, 0.17087200869688335, -0.06087808836359262, -0.0052748837320228045, 0.0993172601264436, 0.1412132001752983, -0.4726941976718141, -0.6988372621207715, -0.22344396364042224, 0.41628196015754826, -0.042218261640045905, -0.604969922744884, 0.1374323897287803, 0.061242656964240284, 0.290727142529809, -0.2801709116377927, 0.2842775087612397, 0.12596846719956223, 0.5135487472354964, 0.3735891103402367, -0.1363006334944505, 0.07088341695365745, -0.036106310595521274, 0.04804711732494997, -0.23941779240105324, 0.5111416419560126, -0.17612501011208215, -0.009842317070215701, 0.12453011899608712, -0.3966635581759568, -0.037293661492106396, -0.21809264528230204, -0.11931323937704445, 0.09263187249172383, -0.0822553275381706, -0.21152730068835407, 0.2235889226699939, 0.3991056720351843, -0.17629204117531316, -0.14514782644851054, -0.09112958374025285, -0.08459885696809949, -0.018158801944287498, 0.3202336532517915, 0.009279049002394936, -0.21772673966009035, 0.14512057565543124, 0.4087872152460615, 0.1346085025832479, 0.10938061882634142, 0.3588534690891971, 0.20572147955090653, 0.15859140138551295, -0.16674734375085937, 0.09825754860862625, 0.18827165473602211, 0.40292997395542013, -0.11701288519023566, 0.10347720879703246, 0.05984164471312993, -0.2552791912841435, 0.23980362890593648, -0.11204246384083844], 
                    y: [1.995537205313182, 1.9231101566318356, 0.3758902611862875, 0.40769161120720065, 1.53074000965544, 1.7060586135468163, 1.3579736982749244, 2.2792905895815014, 0.7635948431816858, 0.05886721965499959, 0.3866257144674374, 1.847685084744016, 0.686118914837646, 1.1677224717001118, 1.2292822787704067, 1.2558478414872098, 1.3136381837674458, 0.45658983510768936, 0.8764739122704563, 0.9819018988630035, 1.5822343942764816, 1.7660601653992367, 1.8028119012598078, 1.8972493259436465, 1.0700577852950275, 1.7661356235720318, 2.933130661967738, 1.1657271082478715, 1.030419957404889, 1.900388427522692, 1.0096844472456536, 1.9267543247570955, 1.1149551235813762, 2.4624397708554486, 2.351941702967542, 1.6328006203566114, 0.6414160329276887, 1.0216502895110382, 1.5768668586702679, 1.8462148687946622, 2.0005938311864218, 1.2728799836694114, 2.6536758082755423, 1.6841412737454013, 1.7681283707683029, 1.7451306652471494, 1.6036836574717115, 1.92079214622084, 1.4346085974260687, 0.30266102631146735, 1.8474589484209714, 1.6878791936056472, 1.9878863096693096, 0.506423099136517, 1.8600728030463562, 1.1826426105497763, 0.36305866606059606, 2.2079937310265314, 1.3490416345806058, 1.3008010074701486, 1.6588200984304005, 1.0664977998362029, 2.1858863233349224, 1.1278462523452106, 0.756991500489971, 1.1122650289190974, 1.5249250066590467, 1.1487693673265926, 1.3236414246775774, 0.26919074756612504, 0.7909876218969777, 1.919453862437367, 0.808118279373597, 1.0998372867161474, 0.5802774477842879, 0.24317658184127056, 1.7649057231288303, 1.3639660410494483, 0.45944950049924593, 1.3667217791962158, 1.5814536627473665, 1.0418122436095243, 1.3843437890728616, 0.8131155552953865, 0.8678387361206179, 1.0908158633409606, 2.001501535520067, 1.8829112484836652, 1.1771954897517511, 0.7514026330283371, 1.8980928593934787, 0.8777650668916559, 1.0668506252933727, 0.9349696890774314, 1.7202045712624718, 0.6336507013826803, 0.3222220686411566, 0.4021792579931843, 1.1111087493789369, 1.4572195783057296, 0.9482805251408992, 0.7447488590118977, 0.7485559871184035, 1.4115190635491617, 1.6725331159745795, 1.4295101561973615, 1.8077689593930644, 1.3357722457818142, 0.9448248195695496, 1.691450941395299, 1.7635667064008167, 0.9761100020120018, 1.7750598984930093, 1.314898834368918, 0.5658516948313819, 0.7868747742272753, 0.865855592110872, 1.478660704684859, 0.9740844155109332, 1.003205443382341, 1.9995095095611735, 0.3964411030059863, 0.7121834459160983, 1.5965242366114705, 1.5110625394402064, 1.119292184235441, 1.002816872313066, 1.808527492694738, 0.801287145651475, 0.08009881914475424, 1.1724062413279053, 0.9372054530792999, 1.1413110442992385, 1.0531652784555556, 1.1630853309186246, 1.561467333181737, 1.5518891391582625, 2.306081290517347, 0.682920565547337, 1.9568922167596525, 2.0947280698478976, 1.6309074497103584, 1.378446877962192, 0.4600082457674029, 1.5613573061804906, 2.376299403588668, 1.6916878106011208, 1.4510541404060815, 1.0783733330137004, 0.25657808233926543, 0.42238559488585575, 0.5286938533905682, 2.190795145987621, 2.537751316665504, 2.6750378710051566, 3.0124969867679003, 2.0836639105476658, 1.4620886614379298, 3.295783148494501, 0.8653973934515101, 0.6226009756053018, 1.099432856520935, 0.7106773682636073, 1.046779222555171, 1.110015934175245, 0.42943020653662417, 0.3437874884516896, 1.6077058507005042, 1.4482753602961047, 0.7492046172709377, 1.1737510497482158, 0.8741213288096188, 1.4790529597323836, 1.2410987496055748, 1.5537752045028606, 1.4835064722010283, 0.3697601331095347, 0.3612142310443183, 1.3355726331449533, 1.6883326716529898, 1.859532627257996, 0.8728020152831327, 1.4715271522907944, 1.1169253340541154, 1.2738828011354129, 1.0532217239554256, 2.0317521813944763, 1.6175671386964539, 0.62582426827412, 1.096036146447169, 0.7206080145381158, 1.3032330646958619, 1.0558277342288032, 0.8990199234652964, 0.46805656602254625, 0.5389395677896396, 0.7306268613121752, 1.6793506971862762, 0.22480882682376868, 0.9982244535141399, 1.1344962711825772, 0.8193092292178481, 1.054244924578083, 1.3647114554031998, 1.1724616486639983, 0.3754493932041875, 1.936372514151232, 1.73916823342889, 1.366652947865759, 1.2085159244548214, 0.9502487500416456, 1.9705902427125077, 1.1588381031242254, 1.4575951932491165, 1.9050341331908724, 1.1672211127183065, 0.8676778850854235, 0.8649026272635292, 0.8029194618637066, 1.8342259168385087, 1.8623586761146471, 0.24850680710839895, 0.9525528889596476, 1.1771466206377554, 0.8206505192963575, 0.7965229504481497, 1.229510292481878, 0.8973797296355228, 0.194790227797844, 1.5651121563028145, 0.7638505344847423, 1.68046635856186, 0.954999731138811, 0.3267559782396536, 1.0616881251787729, 1.722981219390783, 0.7107569162520492, 0.9091192333001243, 0.47844700270426205, 1.5798854859996356, 0.710178990225746, 0.4260797447873674, 1.1568627792025892, 0.7378302426045421, 1.1161492077130422], 
                    z: [3.769680781166456, 2.480790624704902, 3.2934704344734516, 1.980768250499894, 1.0505295282963494, 1.9286748153643887, 2.6256877323681884, 1.19516273786288, 1.8217994472178922, 1.3440973815663488, 2.3234586090861202, 2.549449706961972, 0.5129411537220759, 0.8961262684900395, 1.6996196313047953, 1.983308638680045, 1.0249709230583839, 3.4809700528104623, 0.8683785404959337, 2.2689091094673506, 2.384061929967122, 2.453221663031093, 2.1991052798530326, 2.3213559878353323, 2.348111824925622, 1.1073265651690751, 2.9316012954151183, 3.7587423853659243, 3.6115019964124753, 4.798467309437181, 3.5128743855072773, 4.694815021259886, 1.545373135069332, 3.5040168022912312, 3.564940997223972, 3.4030145535094936, 2.2449937628352163, 2.8857029462687014, 1.0783094354943434, 1.90153388738096, 1.1681274358202034, 1.6126897962013933, 2.06044655211688, 1.6816930034243376, 1.7956624701650639, 1.9163043213915536, 1.6721827483368694, 1.7651547273385935, 1.631761178065755, 1.4713241635766303, 0.6434455201880361, 0.8891530844580326, 0.5766295717423837, 1.640865709537254, 0.5898045339769695, 1.55561898688247, 1.0813866817392686, 0.6049807406262303, 2.235463687447729, 1.8908586942735557, 0.9375342167424692, 1.6780003582050829, 0.6997681874541029, 2.5703568667255015, 2.2137343349939074, 1.4414925187466825, 1.7087791492983648, 1.00428118791504, 2.3201192405206528, 1.4998509934896043, 1.4754875750040592, 2.2787069568133025, 1.690080322711664, 1.9094854751637034, 2.083082094269873, 1.7907536569844493, 1.5216172442601468, 1.6562909928455296, 1.9058703275164055, 1.1762241026509643, 1.7325773021919781, 1.6740442251446974, 1.2151334465337829, 1.7482246685749518, 1.7646759668813858, 1.47210305707977, 1.7749064465323217, 1.694478270150372, 1.6674290367355642, 1.634665801269213, 0.5179494326394741, 1.285639234989456, 1.7917674791071834, 1.8135017813575534, 1.0123289928704229, 0.8725054917048114, 0.6605539798472335, 1.6453197378848547, 0.8349317479843401, 1.0317854890287568, 1.3985170385584824, 1.6506296200054402, 1.4755397823974439, 0.8795825657282308, 0.9754273931703499, 0.6231792221963274, 1.0005451215787042, 1.395045910994102, 1.6238429473791676, 0.6740039276868603, 1.478792664697489, 1.626200463798072, 0.7572067763864123, 1.887069559518215, 0.8944724794084666, 1.002894438363525, 0.7403669729038566, 2.0526908230573655, 2.2741080308422266, 2.1595523926421842, 2.550441970919266, 4.100864907838411, 1.6411126067936994, 0.5548522843928338, 1.371300322772656, -0.06453372162327897, 1.5282351562114447, 2.1656875813877066, 1.46958762362491, 0.5946910978198172, 1.2315635503503723, 1.7610794654318975, 1.90686862456285, 1.69490986434596, 1.8978393116350414, 1.371907621660928, 1.214976748983433, 0.6670451084272453, 1.1850929760539555, 1.6251032888159758, 1.3695070434654264, 1.866729151659572, 1.9785532973274607, 1.3402178524526023, 1.398453271143324, 1.2591733956067839, 1.9457248496659116, 2.0554541959762695, 1.4889572503270867, 1.384382409862542, 1.473253269687555, 0.8621048531045942, 1.5209722966276213, 1.4946909728987443, 1.466641965146769, 0.3500408264221717, -0.0625733507549558, 0.445197094521819, 0.8063010787009071, 1.3709405631638583, 0.6223480414424782, 2.4655023717320175, 2.9319563795308787, 2.238525559727161, 1.9389509356931514, 1.614138581549444, 1.9297248914981096, 1.74108728529931, 0.7580241517627968, 1.3706643653564454, 1.788224495190821, 1.5798485499971362, 1.4944660608387366, 1.8871387594620228, 2.054780055128931, 1.7306440610145464, 1.3981886245991868, 1.381964790147239, 2.0305270004112743, 0.6687650948433281, 0.15390899295352828, 2.330732129933886, 1.2468518707748577, 1.583165933263908, 1.2268868906407178, 1.4881747602141973, 1.219628716484878, 1.7074243543711884, 1.3075627894913406, 1.1391138470568796, 2.201589175325084, 1.7072978609445784, 1.6143381821351939, 1.4971786085119538, 1.6016768191029198, 1.8164555927966886, 0.7959750597406924, 0.6363269647297249, 0.5101314272527315, 1.6472962883329176, 1.1793940395983349, 1.6334875003104836, 0.7230303474822043, 1.290411040975335, 1.0458486362851664, 0.5634906555519137, 0.6440379288974989, 0.5237595949936392, 1.3609241525113558, 1.298522353325616, 1.5484884683630493, 0.5124075952670722, 2.053534246032632, 1.5984077860356118, 1.5405185132839474, 1.6150738828286288, 1.6214999503158607, 1.7971692183226846, 1.9758891572879622, 1.8590633169939037, 1.7251292663985096, 1.8122527865026938, 1.7850423167028835, 1.7065324918854576, 2.3228212223277622, 1.7866700489932827, 1.2641281542964058, 1.6352365843894718, 0.7754172849781281, 0.5285309217944789, 0.7186213280046917, 0.8234668124547913, 1.6116738849493764, 0.7813340470890372, 0.895240493782934, 0.5156947205296971, 1.8178780673056079, 1.4002707144323605, 0.6922054592812211, 0.8149997183309854, 1.3718805396999518, 0.47250683753312794, 1.1304923543482268, 1.7137878350569231, 1.6015821657013116],
                    mode: 'markers',
                    distance: 120,
                    marker: {
                        size: 2,
                        color: 'rgba(255, 0, 0, 1.0)',
                        opacity: 0.4
                    },
                    type: 'scatter3d'

            }],
            layout:{
                paper_bgcolor : "#dcdde1",
                scene: {
                    camera: {
                        up:{x: 0, y: 1, z: 0},
                        eye:{x: 0, y: 0, z: 1}
                    },
                }
            },
            options: {},
            ids: [1,5],
            activeName: "absoluteHits",
            targetUrl: "",
            pointSelected: false,
            filter:{
                batterId: 0,
                pitcherId: 0,
                distance:{
                    threshold: 0,
                    condition: ">"
                }
            }
        }
    },
    methods: {
        selectType(tab, e) {
            console.log(tab, e);
            this.$axios.get('https://httpbin.org/get')
                .then((response) => {
                    console.log(response.data.origin);
                })
                .catch((e) => {
                    console.log(e);
                });
            // 開くタブごとにデータを差し替える処理
        },
        extract(e){
             console.log(e);
        },
        showDialog(e){
            const index = e.points[0].pointNumber;
            this.targetUrl = "/hits/" + this.ids[index];
            this.pointSelected = true;
        }
    }
}
</script>
<style>
.el-tabs__item{
    font-family: 'Odibee Sans', cursive;
}
.el-card{
    margin-top: 1em;
}
</style>